import{C as s,a as b,F as j,R as d,j as t,H as A,L as C}from"./app-DiW-XT2R.js";import{B as T}from"./BlockService-B1hVAasl.js";import{A as B}from"./AppointmentService-lEwwiXpp.js";import{B as D}from"./BlockCategories-gKFyJIeZ.js";import{u as V,F as y}from"./index.esm-7xo1ZZ6V.js";import{o as w,d as I,s as N,t as F}from"./zod-BSnW4xGW.js";import{u as P}from"./SnackbarHook-CcEHZ6yi.js";import{V as H}from"./ValidatedSelect-DfUES9ev.js";import{V as R}from"./ValidatedDatePicker-BN60rbp6.js";import{V as E}from"./ValidatedCheckbox-Do-plhcJ.js";import{C as L}from"./CustomButton-nEbszSQU.js";import{C as M}from"./CustomSnackbar-Dw7l-5cQ.js";import{A as _}from"./AdminLayout-BncvC458.js";import{B as a,T as u}from"./Box-BIlEOssd.js";import{B as q}from"./Breadcrumbs-CyVMMUL3.js";import{S as z}from"./Send-DwzwYWJL.js";import"./InputAdornment-BF2v1MXS.js";import"./useSlot-D1jzCan3.js";import"./Select-1FYDYG3S.js";import"./Menu-bPvhPpmt.js";import"./isHostComponent-B2iQ8i1a.js";import"./Paper-BW67c0Rd.js";import"./Modal-C_Vi7S8X.js";import"./useControlled--Ee95RYi.js";import"./formControlState-Dq1zat_P.js";import"./useFormControl-D4hgghdo.js";import"./FormHelperText-Cjkp522a.js";import"./isMuiElement-tkmUoEbT.js";import"./MenuItem-GJkZjFZB.js";import"./listItemTextClasses-BxSQuiyo.js";import"./index-DbsX50-t.js";import"./IconButton-Cu0Qh6L-.js";import"./Popper-C22uOTAg.js";import"./Button-3jDmhGPp.js";import"./ListItem-CDZqcBXO.js";import"./listItemButtonClasses-BKDzk8Yp.js";import"./Chip-D6wlp6tT.js";import"./FormControlLabel-BE9UflYY.js";import"./Checkbox-6Ob7jcJb.js";import"./SwitchBase-CAo85LZi.js";import"./styles.module-DNUDPVkR.js";import"./Icon-Cyiifixs.js";import"./mail-CSA8imBK.js";import"./createLucideIcon-CzejhRRW.js";import"./smartphone-D7WOu-Aq.js";import"./ListItemIcon-lfoxkzoc.js";import"./ListItemText-6SnngRZD.js";import"./hook-ChxrQmvj.js";import"./Avatar-BaiBLuYk.js";import"./ThemeProvider-tTCgpLcA.js";const Mt=({category:r})=>{const p=s.get(T),i=s.get(b),f=s.get(B),h=s.get(j),[l,x]=d.useState([]),g=w({blockId:N({message:"Please determine the trip"}).refine(e=>h.isPositive(e)),startDate:I({message:"Date is required!"})}),o=V({mode:"onBlur",reValidateMode:"onBlur",resolver:F(g),defaultValues:{blockId:" -1",startDate:new Date,isActive:!0}}),{snackbar:m,setSnackbar:c,handleClose:S}=P();d.useEffect(()=>{p.getActiveBlocks(D.TRIP).then(e=>{x(e.data),console.log(e.data),o.setValue("blockId",e.data[0].id.toString(),{shouldValidate:!1,shouldDirty:!1})})},[]);const k=()=>{const e=new FormData;e.append("category",r),e.append("blockId",String(o.getValues("blockId"))),e.append("startDate",new Date(o.getValues("startDate")).toDateString()),e.append("isActive",String(o.getValues("isActive"))),f.store(e).then(v=>{o.reset(),c(n=>({...n,open:!0,message:"A new appointment has been added",severity:"success"}))}).catch(v=>{c(n=>({...n,open:!0,message:"Error Happened while storing appointment",severity:"error"}))})};return t.jsxs(_,{children:[t.jsx(A,{title:"Appointments"}),t.jsx(a,{className:"py-[16px]",children:t.jsxs(a,{children:[t.jsxs(q,{children:[t.jsxs(C,{href:"/admin/appointments",children:["Back to ",i.toTitleCase(r)]}),t.jsxs(u,{children:["Add New ",i.toTitleCase(r)]})]}),t.jsx(a,{className:"p-[16px]",children:t.jsxs(u,{variant:"h5",children:["Add New ",i.toTitleCase(r)]})}),t.jsx(y,{...o,children:t.jsxs(a,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"100%"}},noValidate:!0,autoComplete:"off",onSubmit:o.handleSubmit(k),children:[t.jsx(E,{name:"isActive",id:"isActive",color:"secondary",control:o.control,label:"Is Active"}),l.length>0&&t.jsx(H,{control:o.control,controlName:"blockId",id:"blockId",label:"Trip",placeholder:"Trip",withNone:!1,items:l.map(e=>({id:e.id.toString(),name:p.getBlockName(e)}))}),t.jsx(R,{controlName:"startDate",methods:o,label:"Trip Date"}),t.jsx(z,{direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2,className:"mx-[8px] my-[24px]",children:t.jsx(L,{task:"add",text:i.toTitleCase(r)})})]})}),t.jsx(M,{open:m.open,message:m.message,onClose:S,severity:m.severity})]})})]})};export{Mt as default};
