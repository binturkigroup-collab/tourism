import{C as n,a as V,F as w,R as m,j as e,H as T,L as I,b as F}from"./app-B05HYnb3.js";import{A as M}from"./AdminLayout-BqgSxwa6.js";import{B as N}from"./BlockService-Dra7VTvY.js";import{A as H}from"./AppointmentService-CJNyB9Gg.js";import{B as P}from"./BlockCategories-gKFyJIeZ.js";import{u as E,F as R}from"./index.esm-DVlBRIqM.js";import{o as L,d as U,s as O,t as _}from"./zod-lJ296xRb.js";import{u as q}from"./SnackbarHook-CiBrGsL4.js";import{V as z}from"./ValidatedCheckbox-BqBvhm5a.js";import{V as G}from"./ValidatedSelect-CZhj5vm9.js";import{V as J}from"./ValidatedDatePicker-SsE8PVUt.js";import{C as g}from"./CustomButton-CJVVLJmt.js";import{C as K}from"./CustomSnackbar-Bez-GNp6.js";import{D as Q}from"./DeleteModal-BocftlnO.js";import{B as p,T as x}from"./Box-RV04XL3h.js";import{B as W}from"./Breadcrumbs-LN1Gmsm_.js";import{S as X}from"./Send-ZAnJecau.js";import"./styles.module-DNUDPVkR.js";import"./Icon-Dao_BtV8.js";import"./Paper-Bv3sIEco.js";import"./useSlot-xgwQKnQ5.js";import"./mail-wIstfkvy.js";import"./createLucideIcon-CqSzLRzo.js";import"./smartphone-Bx5cTzbE.js";import"./isHostComponent-C3L2UNi8.js";import"./MenuItem-B8b56AnY.js";import"./listItemTextClasses-CNzp_QZz.js";import"./listItemButtonClasses-DLtIpq-e.js";import"./ListItemIcon-C6KgXvLR.js";import"./ListItemText-Ir23mb16.js";import"./hook-C_C30jOJ.js";import"./Avatar-CW627ElJ.js";import"./IconButton-B3gEuC88.js";import"./Menu-BVfd7xCs.js";import"./Modal-Cn09HyHg.js";import"./ThemeProvider-Bv7TvrOm.js";import"./FormControlLabel-BQtj8q_0.js";import"./formControlState-Dq1zat_P.js";import"./useFormControl-BofjglMm.js";import"./Checkbox-DHu3bCxU.js";import"./SwitchBase-D_Sq7LWZ.js";import"./useControlled-DUTa1Exj.js";import"./InputAdornment-gOE6kajG.js";import"./Select-B30xSI0u.js";import"./FormHelperText-Qr84Mdnz.js";import"./isMuiElement-CWm6COmJ.js";import"./index-Dq134tiA.js";import"./Popper-C4veDasF.js";import"./Button-C2eAeK6r.js";import"./ListItem-CIUyGoMR.js";import"./Chip-CzPK2ZLG.js";const Qe=({appointment:c})=>{const u=n.get(N);n.get(V);const f=n.get(H),k=n.get(w),[h,S]=m.useState([]),[s,b]=m.useState(c),v=L({blockId:O({message:"Please determine the trip"}).refine(t=>k.isPositive(t)),startDate:U({message:"Date is required!"})}),o=E({mode:"onBlur",reValidateMode:"onBlur",resolver:_(v),defaultValues:{blockId:s.blockId.toString(),startDate:new Date(s.startDate),isActive:s.isActive}}),{snackbar:l,setSnackbar:i,handleClose:j}=q(),[A,d]=m.useState(!1),y=()=>{d(!1)},D=()=>{d(!0)};m.useEffect(()=>{u.getActiveBlocks(P.TRIP).then(t=>{S(t.data)})},[]);const C=()=>{const t=new FormData;t.append("blockId",String(o.getValues("blockId"))),t.append("startDate",new Date(o.getValues("startDate")).toDateString()),t.append("isActive",String(o.getValues("isActive"))),f.update(t,c.id).then(a=>{console.log("response",a.data.appointment),b(a.data.appointment),i(r=>({...r,open:!0,message:"A new appointment has been added",severity:"success"}))}).catch(a=>{i(r=>({...r,open:!0,message:"Error Happened while storing appointment",severity:"error"}))})},B=()=>{d(!1);const t=new FormData;t.append("category","appointment"),f.destroy(c.id,t).then(a=>{i(r=>({...r,open:!0,message:"Block has been deleted!",severity:"success"})),F.get("/admin/appointments")}).catch(a=>{i(r=>({...r,open:!0,message:"Error Happened while deleting block!",severity:"error"}))})};return e.jsxs(M,{children:[e.jsx(T,{title:"Appointments"}),e.jsx(p,{className:"py-[16px]",children:e.jsxs(p,{children:[e.jsxs(W,{children:[e.jsx(I,{href:"/admin/appointments",children:"Back to Appointments"}),e.jsxs(x,{children:["Update ",s.trip]})]}),e.jsx(p,{className:"p-[16px]",children:e.jsxs(x,{variant:"h5",children:["Update ",s.trip]})}),e.jsx(R,{...o,children:e.jsxs(p,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"100%"}},noValidate:!0,autoComplete:"off",onSubmit:o.handleSubmit(C),children:[e.jsx(z,{name:"isActive",id:"isActive",color:"secondary",control:o.control,label:"Is Active"}),h.length>0&&e.jsx(G,{control:o.control,controlName:"blockId",id:"blockId",label:"Trip",placeholder:"Trip",withNone:!1,items:h.map(t=>({id:t.id.toString(),name:u.getBlockName(t)}))}),e.jsx(J,{controlName:"startDate",methods:o,label:"Trip Date"}),e.jsxs(X,{direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2,className:"m-[8px]",children:[e.jsx(g,{task:"update",text:""}),e.jsx(g,{task:"delete",text:"",onClick:D})]})]})}),e.jsx(K,{open:l.open,message:l.message,onClose:j,severity:l.severity}),e.jsx(Q,{open:A,onClose:y,message:"Are you sure that you want to delete this appointment?",confirmDelete:B})]})})]})};export{Qe as default};
