import{j as e,R as a,L as P,C as j,a as g}from"./app-C3wK80uY.js";import{u as R}from"./SnackbarHook-vWpH4Y2e.js";import{C as N}from"./CustomSnackbar-G8VUdTuF.js";import{A}from"./AppointmentService-CNbiKTJr.js";import{C as f}from"./CustomButton-C3dP_EVb.js";import{B as S,T as w}from"./Box-DXkLJjvK.js";import{M as B}from"./Modal-BOfQSbY0.js";import{S as O}from"./Send-MfSLearV.js";import{G as _,C as z,a as G,P as H,T as q,E as $,b as J,S as K,c as Q,d as U,F as V,R as W}from"./grid.component-C-UJl6Wi.js";import{I as X}from"./toolbar-DUNkpNtP.js";const Y={appointments:[],limit:"0",offset:0,search:"",count:0,next:()=>{},loading:!1,changeLimit:t=>{},onSearch:t=>{},deleteFn:t=>{}},y=a.createContext(Y),Z=({value:t,children:s})=>e.jsx(y.Provider,{value:t,children:s}),D=()=>{const t=a.useContext(y);if(t===void 0)throw new Error("The context should be inside the provider!");return t},ee=t=>e.jsx("div",{className:"m-[12px]",children:e.jsx(P,{href:`/admin/appointments/edit/${t.id}`,children:e.jsx(f,{task:"display",text:""})})}),te="_modalStyle_1bxe6_1",oe={modalStyle:te},ne=t=>{const[s,n]=a.useState(!1),{deleteFn:l}=D(),c=()=>{n(!1)},d=()=>{n(!0)},p=()=>{n(!1),l(t.id)};return e.jsxs(S,{className:"m-[12px]",children:[e.jsx(f,{task:"delete",text:"",onClick:d}),e.jsx(B,{open:s,onClose:c,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsxs(S,{className:oe.modalStyle,sx:{bgcolor:"background.paper",color:"text.primary",border:"2px solid"},children:[e.jsx(w,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Confirm Deletion Message"}),e.jsx(w,{id:"modal-modal-description",sx:{mt:2},children:"Are you sure that you want to delete appointment?"}),e.jsx(O,{direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2,className:"m-[8px]",children:e.jsx(f,{task:"delete",text:"",onClick:p})})]})})]})},se=t=>{const s=new Date(t.startDate);return e.jsx("div",{className:"m-[12px]",children:s.toLocaleDateString()})},ae=t=>e.jsx("div",{className:"m-[12px]",children:t.isActive?"Active":"Inactive"}),re=[{type:"checkbox",width:"50"},{field:"id",headerText:"ID",width:"200",textAlign:"Center"},{field:"trip",headerText:"Trip",width:"150",allowFiltering:!0,textAlign:"Center"},{field:"date",headerText:"Date",width:"150",textAlign:"Center",template:se},{field:"isActive",headerText:"Status",width:"200",textAlign:"Center",template:ae},{headerText:"Edit",width:"130",textAlign:"Center",template:ee},{headerText:"Delete",width:"130",textAlign:"Center",template:ne}],ie=()=>{j.get(A);const{appointments:t,onSearch:s}=D();let n;const l={type:"Multiple"},c={type:"Excel"},d={pageSizes:g.PageSizes,pageSize:g.ListLimit,totalRecordsCount:3,pageCount:25},p=o=>{switch(o.requestType){case"paging":break;case"searching":o.searchString;break}},C=o=>{if(o.rows!==void 0&&o.fromIndex!==void 0&&o.dropIndex!==void 0){o.cancel=!0;let m=[];for(let x=0;x<o?.rows?.length;x++)m.push(o?.fromIndex+x);n&&n.reorderRows(m,o.dropIndex)}};return e.jsx(S,{children:e.jsxs(_,{ref:o=>n=o,id:"blockComp",dataSource:t,allowPaging:!0,allowSorting:!0,allowFiltering:!0,allowExcelExport:!0,allowPdfExport:!0,toolbar:["Delete","Search"],editSettings:{allowDeleting:!0,showDeleteConfirmDialog:!0},filterSettings:c,pageSettings:d,actionComplete:p,allowRowDragAndDrop:!0,selectionSettings:l,rowDrop:C,children:[e.jsx(z,{children:re.map((o,m)=>e.jsx(G,{...o},m))}),e.jsx(X,{services:[H,q,$,J,K,Q,U,V,W]})]})})},Se=({appointments:t,count:s})=>{const[n,l]=a.useState(t),[c,d]=a.useState(t),[p,C]=a.useState(!1),[o,m]=a.useState(""),x=j.get(A),[b,k]=a.useState(g.FetchList[0]),{snackbar:h,setSnackbar:v,handleClose:E}=R(),T=r=>{k(r)},L=r=>{const u=new FormData;u.append("id",r.toString()),u.append("category","appointment"),x.destroy(r,u).then(()=>{l(n.filter(i=>i.id!==r)),d(c.filter(i=>i.id!==r)),v(i=>({...i,open:!0,message:"Appointment has been deleted!",severity:"success"}))}).catch(i=>{v(M=>({...M,open:!0,message:"Error Happened while deleting appointment!",severity:"error"}))})},F=r=>{},I=()=>{};return e.jsxs(Z,{value:{appointments:n,limit:b,offset:0,search:"",count:s,next:I,loading:p,changeLimit:T,onSearch:F,deleteFn:L},children:[e.jsx(ie,{}),e.jsx(N,{open:h.open,message:h.message,onClose:E,severity:h.severity})]})};export{Se as A};
