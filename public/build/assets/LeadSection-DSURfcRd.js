import{ac as k,C as D,R,j as e}from"./app-DiW-XT2R.js";import{Card as B,CardHeader as V,CardTitle as $,CardContent as A}from"./card-C8NVqiK_.js";import{Button as _}from"./button-CkCT4k52.js";import{Input as x}from"./input-DSE6Ndre.js";import{Textarea as q}from"./textarea-DmMJ5yqn.js";import{u as I}from"./index.esm-7xo1ZZ6V.js";import{o as H,s as n,l as P,t as W}from"./zod-BSnW4xGW.js";import{Form as E,FormField as m,FormItem as i,FormLabel as l,FormControl as c,FormMessage as p}from"./form-Cef94fcf.js";import{i as Q}from"./index-C_Q9GpH1.js";import{u as Y,R as G}from"./recaptcha-wrapper-BfG8BTC2.js";import{C as M}from"./CustomSnackbar-Dw7l-5cQ.js";import{u as z}from"./SnackbarHook-CcEHZ6yi.js";import{L as J}from"./LeadService-CMJtdjrJ.js";import"./utils-Cf3rMUPJ.js";import"./index-Cn1U3PfC.js";import"./index--SyUBnmF.js";import"./label-IVtBzXlZ.js";import"./index-Bnh_b77s.js";import"./index-DbsX50-t.js";import"./useSlot-D1jzCan3.js";import"./Paper-BW67c0Rd.js";import"./IconButton-Cu0Qh6L-.js";const je=({leadType:s,callback:d})=>{const{t:r}=k(),b=H({name:n().min(2,r("name-err")).max(100,r("too-long-name")),phone:n().min(8,r("phone-err")).refine(o=>Q(o),{message:r("phone-invalid")}),email:n().email(r("invalid-email")).optional().or(P("")),note:n().max(500,r("too-long-note")).optional()}),N=D.get(J),[w,h]=R.useState(!1),{capchaToken:S,recaptchaRef:C,handleRecaptcha:v}=Y(),a=I({resolver:W(b),mode:"onBlur",defaultValues:{name:"",phone:"",email:"",note:""}}),{snackbar:u,setSnackbar:f,handleClose:F}=z(),L=o=>{if(!S)return;const t=new FormData,j=a.getValues("name"),y=a.getValues("phone");t.append("referenceId",s.id.toString()),t.append("type",s.type),t.append("name",j),t.append("phone",y),t.append("email",a.getValues("email")||""),t.append("note",a.getValues("note")||""),t.append("downloadPDF",String(s.isBrochureDownloaded||!1)),t.append("action",`${j} with number ${y} asks for ${s.type} ${s.propertyName}
        ${s.isBrochureDownloaded?". Brochure Downloaded":""}
        `),h(!0),d&&d(),N.store(t).then(()=>{window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"lead_form_submitted",form_type:"lead",page:s.type,form_id:s.id,form_name:s.propertyName}),h(!1),f(g=>({...g,open:!0,message:"Your inquiry has been submitted. We'll contact you soon.",severity:"success"}))}).catch(g=>{h(!1),f(X=>({...X,open:!0,message:"Error happened when sending your inquiry.",severity:"success"}))}),a.reset()};return e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(B,{className:"sticky top-4 bg-backgrund",children:[e.jsxs(V,{children:[e.jsx($,{className:"text-primary",children:r("req-info")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r("fill-details")})]}),e.jsx(A,{children:e.jsx(E,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(L),className:"space-y-4",children:[e.jsx(m,{control:a.control,name:"name",render:({field:o})=>e.jsxs(i,{children:[e.jsxs(l,{className:"text-primary",children:[r("name")," *"]}),e.jsx(c,{children:e.jsx(x,{className:"text-primary",placeholder:r("full-name"),...o})}),e.jsx(p,{})]})}),e.jsx(m,{control:a.control,name:"phone",render:({field:o})=>e.jsxs(i,{children:[e.jsxs(l,{className:"text-primary",children:[r("phone")," *"]}),e.jsx(c,{children:e.jsx(x,{className:"text-primary",placeholder:"+971 XX XXX XXXX",...o})}),e.jsx(p,{})]})}),e.jsx(m,{control:a.control,name:"email",render:({field:o})=>e.jsxs(i,{children:[e.jsx(l,{className:"text-primary",children:r("email")}),e.jsx(c,{children:e.jsx(x,{className:"text-primary",placeholder:"your.email@example.com",...o})}),e.jsx(p,{})]})}),!d&&e.jsx(m,{control:a.control,name:"note",render:({field:o})=>e.jsxs(i,{children:[e.jsx(l,{className:"text-primary",children:r("note")}),e.jsx(c,{children:e.jsx(q,{className:"text-primary",placeholder:r("any-specific"),rows:4,...o})}),e.jsx(p,{})]})}),e.jsx(G,{ref:C,sitekey:"6Lc3QS4sAAAAALeY3f-BQHbGPF09mfl97jWIucDr",onChange:v}),e.jsx(_,{type:"submit",className:"w-full",disabled:w,children:r("sub-inq")})]})})}),e.jsx(M,{open:u.open,message:u.message,onClose:F,severity:u.severity})]})})};export{je as default};
