import{bl as D,bm as C,C as y,r as f,bn as L,bo as P,ac as q,bp as u,j as e,bq as j}from"./app-B05HYnb3.js";import{Badge as z}from"./badge-CQAkPWEM.js";import{Button as S}from"./button-B1WMqiQw.js";import{TooltipProvider as F,Tooltip as H,TooltipTrigger as R,TooltipContent as U}from"./tooltip-DaDuEEcu.js";import{B as Z}from"./BlockService-Dra7VTvY.js";import{T as V}from"./TripService-BEdkyMOC.js";import{C as W}from"./chevron-left-Cr4y1uYm.js";import{C as _}from"./chevron-right-Cqol4wfc.js";import{M as G}from"./map-pin-eFl9BS59.js";import"./index-BYNfBQNa.js";import"./utils-BNZiWBEC.js";import"./index-DFEHFh89.js";import"./index-Dc_FVRD7.js";import"./index-DKn6hfYT.js";import"./index-C_xor1JC.js";import"./index-CPqDbwuc.js";import"./index-BE9hcmzf.js";import"./index-CyGnSxEc.js";import"./index-C94N8Yx2.js";import"./index-BzefNG_8.js";import"./index-DBI0mDla.js";import"./index-DFdgyCiu.js";import"./index-Dr7HbvaI.js";import"./index-CEZyL5L1.js";import"./PackageEnum-BevYZUUJ.js";import"./createLucideIcon-CqSzLRzo.js";function J(o,l){const d=D(o.start),p=D(o.end);let n=+d>+p;const h=n?+d:+p,r=n?p:d;r.setHours(0,0,0,0);let b=1;const c=[];for(;+r<=h;)c.push(D(r)),r.setDate(r.getDate()+b),r.setHours(0,0,0,0);return n?c.reverse():c}function K(o,l){return C(o,-1)}const De=({trips:o,packages:l})=>{const d=y.get(Z),p=y.get(V),[n,h]=f.useState(new Date),[r,b]=f.useState(null),c=L(n),I=P(n),k=J({start:c,end:I}),{t:m}=q(),g=f.useMemo(()=>{const t=[];return l.forEach(s=>{s.appointments.forEach(a=>{t.push({id:`${s.id}-${a.id}`,title:s.title,brief:s.brief,price:Number(s.price)||0,date:new Date(a.startDate.replace(" ","T")+"Z"),image:d.getImageUrl(s.images[0].url),packageId:s.id.toString(),type:"package"})})}),o.forEach(s=>{s.appointments.length>0&&s.appointments.forEach(a=>{t.push({id:`${s.id}-${a.id}`,title:s.title,brief:s.brief,price:Number(s.price)||0,date:new Date(a.startDate.replace(" ","T")+"Z"),image:d.getImageUrl(s.images[0].url),packageId:s.id.toString(),type:"trip"})})}),t},[]),E=f.useMemo(()=>r?g.filter(t=>u(t.date,r)):[],[r,g]),$=t=>g.some(s=>u(s.date,t)),A=t=>g.filter(s=>u(s.date,t)),N=t=>{if(!t)return"trip";const s=l.find(a=>a.id.toString()===t);return p.getTierType(s)},T={standard:"bg-slate-500",deluxe:"bg-amber-500",adventure:"bg-emerald-500",vip:"bg-purple-500",trip:"bg-cyan-500"};return e.jsx(F,{delayDuration:200,children:e.jsx("section",{className:"py-24 bg-muted/30",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center max-w-2xl mx-auto mb-16",children:[e.jsx("span",{className:"text-primary font-semibold text-sm uppercase tracking-wider",children:m("trip-calendar")}),e.jsxs("h2",{className:"font-heading text-3xl sm:text-4xl lg:text-5xl font-bold text-foreground mt-3 mb-4",children:[m("plan-your")," ",e.jsx("span",{className:"text-gradient-gold",children:m("journey")})]}),e.jsx("p",{className:"text-muted-foreground text-lg",children:m("plan")})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 bg-card rounded-2xl shadow-soft p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx(S,{variant:"ghost",size:"icon",onClick:()=>h(K(n)),children:e.jsx(W,{className:"w-5 h-5"})}),e.jsx("h3",{className:"font-heading text-xl font-semibold text-foreground",children:j(n,"MMMM yyyy")}),e.jsx(S,{variant:"ghost",size:"icon",onClick:()=>h(C(n,1)),children:e.jsx(_,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"grid grid-cols-7 gap-2 mb-4",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(t=>e.jsx("div",{className:"text-center text-sm font-medium text-muted-foreground py-2",children:t},t))}),e.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[Array.from({length:c.getDay()}).map((t,s)=>e.jsx("div",{className:"aspect-square"},`empty-${s}`)),k.map(t=>{const s=$(t),a=A(t),x=r&&u(t,r),v=u(t,new Date),M=e.jsxs("button",{onClick:()=>b(t),className:`aspect-square rounded-xl p-1 flex flex-col items-center justify-center transition-all duration-200 ${x?"bg-primary text-primary-foreground ring-2 ring-primary ring-offset-2":s?"bg-primary/10 hover:bg-primary/20":"hover:bg-muted"} ${v&&!x?"ring-2 ring-primary/50":""}`,children:[e.jsx("span",{className:`text-sm font-medium ${x?"text-primary-foreground":"text-foreground"}`,children:j(t,"d")}),s&&e.jsx("div",{className:"flex gap-0.5 mt-1",children:a.slice(0,3).map((i,w)=>e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${T[N(i.packageId)]}`},w))})]},t.toISOString());return s?e.jsxs(H,{children:[e.jsx(R,{asChild:!0,children:M}),e.jsx(U,{className:"max-w-xs p-3",side:"top",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"font-semibold text-sm border-b border-border pb-1",children:j(t,"EEEE, MMM d")}),a.map(i=>{const w=l.find(B=>B.id.toString()===i.packageId),O=i.packageId?w?.title:"Trip";return e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full mt-1.5 shrink-0 ${T[N(i.packageId)]}`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:i.title}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[O," • ",i.price.toLocaleString()," AED",i.spotsAvailable!==void 0&&` • ${i.spotsAvailable} spots`]})]})]},i.id)})]})})]},t.toISOString()):M})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 mt-6 pt-6 border-t border-border",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-slate-500"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Standard"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-amber-500"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Deluxe"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-500"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Adventure"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-purple-500"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"VIP"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-cyan-500"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Trip"})]})]})]}),e.jsxs("div",{className:"bg-card rounded-2xl shadow-soft p-6",children:[e.jsx("h4",{className:"font-heading text-lg font-semibold text-foreground mb-4",children:r?j(r,"EEEE, MMMM d, yyyy"):m("select-date")}),r&&E.length===0&&e.jsx("p",{className:"text-muted-foreground text-sm",children:"No trips scheduled for this date."}),e.jsx("div",{className:"space-y-4",children:E.map(t=>{const s=l.find(v=>v.id.toString()===t.packageId),a=t.packageId?s?.title:"Trip",x=N(t.packageId);return e.jsxs("div",{className:"bg-muted/50 rounded-xl overflow-hidden hover-lift",children:[e.jsx("img",{src:t.image,alt:t.title,className:"w-full h-32 object-cover"}),e.jsxs("div",{className:"p-4",children:[e.jsx(z,{variant:x==="vip"?"premium":x==="trip"?"secondary":"gold",className:"mb-2",children:a}),e.jsx("h5",{className:"font-heading font-semibold text-foreground mb-1",children:t.title}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-3",children:[t.brief,t.spotsAvailable!==void 0&&e.jsxs("span",{className:"block text-xs mt-1",children:[t.spotsAvailable," spots available"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"font-semibold text-primary",children:[t.price.toLocaleString()," AED"]}),e.jsx(S,{size:"sm",variant:"outline",children:"Book Now"})]})]})]},t.id)})}),!r&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(G,{className:"w-12 h-12 text-muted-foreground/30 mx-auto mb-3"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:m("click-date")})]})]})]})]})})})};export{De as default};
