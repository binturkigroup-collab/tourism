import{bt as b,r as n,j as u}from"./app-C3wK80uY.js";import{c as j}from"./index-CmRj3aR_.js";import{u as C}from"./index-xRhb10ZP.js";import{u as f}from"./index-DKy3FxTR.js";import{P as m}from"./index-CebN5Sre.js";import{c as v}from"./utils-CYQ9GeJJ.js";import"./index-DjkkKKL-.js";function _(){return b.useSyncExternalStore(k,()=>!0,()=>!1)}function k(){return()=>{}}var p="Avatar",[F,D]=j(p),[M,x]=F(p),S=n.forwardRef((a,e)=>{const{__scopeAvatar:r,...o}=a,[s,t]=n.useState("idle");return u.jsx(M,{scope:r,imageLoadingStatus:s,onImageLoadingStatusChange:t,children:u.jsx(m.span,{...o,ref:e})})});S.displayName=p;var L="AvatarImage",w=n.forwardRef((a,e)=>{const{__scopeAvatar:r,src:o,onLoadingStatusChange:s=()=>{},...t}=a,l=x(L,r),i=P(o,t),d=C(c=>{s(c),l.onImageLoadingStatusChange(c)});return f(()=>{i!=="idle"&&d(i)},[i,d]),i==="loaded"?u.jsx(m.img,{...t,ref:e,src:o}):null});w.displayName=L;var h="AvatarFallback",y=n.forwardRef((a,e)=>{const{__scopeAvatar:r,delayMs:o,...s}=a,t=x(h,r),[l,i]=n.useState(o===void 0);return n.useEffect(()=>{if(o!==void 0){const d=window.setTimeout(()=>i(!0),o);return()=>window.clearTimeout(d)}},[o]),l&&t.imageLoadingStatus!=="loaded"?u.jsx(m.span,{...s,ref:e}):null});y.displayName=h;function A(a,e){return a?e?(a.src!==e&&(a.src=e),a.complete&&a.naturalWidth>0?"loaded":"loading"):"error":"idle"}function P(a,{referrerPolicy:e,crossOrigin:r}){const o=_(),s=n.useRef(null),t=o?(s.current||(s.current=new window.Image),s.current):null,[l,i]=n.useState(()=>A(t,a));return f(()=>{i(A(t,a))},[t,a]),f(()=>{const d=I=>()=>{i(I)};if(!t)return;const c=d("loaded"),g=d("error");return t.addEventListener("load",c),t.addEventListener("error",g),e&&(t.referrerPolicy=e),typeof r=="string"&&(t.crossOrigin=r),()=>{t.removeEventListener("load",c),t.removeEventListener("error",g)}},[t,r,e]),l}var E=S,N=w,R=y;const T=n.forwardRef(({className:a,...e},r)=>u.jsx(E,{ref:r,className:v("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...e}));T.displayName=E.displayName;const $=n.forwardRef(({className:a,...e},r)=>u.jsx(N,{ref:r,className:v("aspect-square h-full w-full",a),...e}));$.displayName=N.displayName;const H=n.forwardRef(({className:a,...e},r)=>u.jsx(R,{ref:r,className:v("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...e}));H.displayName=R.displayName;export{T as Avatar,H as AvatarFallback,$ as AvatarImage};
