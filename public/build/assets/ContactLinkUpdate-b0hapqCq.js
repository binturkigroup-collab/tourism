import{C as f,F as q,a as z,c as G,R as y,r as K,j as t,L as Q,b as X}from"./app-C3wK80uY.js";import{M as Y}from"./MenuService-CSj7q5EB.js";import{u as Z}from"./SnackbarHook-vWpH4Y2e.js";import{u as ee,F as te}from"./index.esm-CmhnqTjL.js";import{o as x,r as ae,b as se,s as p,t as re}from"./zod-B5AMIXlb.js";import{V as b}from"./ValidatedSelect-lEDzcdS4.js";import{V as ne}from"./ValidatedInput-Bp4tVB6p.js";import{V as oe}from"./ValidatedSelectWithIcon-nsc0dtfr.js";import{B as ie}from"./BasicTitleTranslation-yR3fKzC1.js";import{V as k}from"./ValidatedSwitch-DnC4lxtN.js";import{C as v}from"./CustomButton-C3dP_EVb.js";import{C as le}from"./CustomSnackbar-G8VUdTuF.js";import{D as me}from"./DeleteModal-BYkbcGPj.js";import{C as c,a as C}from"./ContactEnum-Dhh-7WXb.js";import{B as T,T as M}from"./Box-DXkLJjvK.js";import{S}from"./Send-MfSLearV.js";import"./InputAdornment-WpRiTsae.js";import"./useSlot-D00As9hZ.js";import"./Select-50sKScyd.js";import"./Menu-Bg2AoiNO.js";import"./isHostComponent-CYuES88E.js";import"./Paper-BEwslr8d.js";import"./Modal-BOfQSbY0.js";import"./useControlled-BhUtEkbl.js";import"./formControlState-Dq1zat_P.js";import"./useFormControl-Cr1AHk0s.js";import"./FormHelperText-QuUs-8Rq.js";import"./isMuiElement-CBKBaUeV.js";import"./MenuItem-CqmEd7jq.js";import"./listItemTextClasses-BIi4qrrm.js";import"./Icon-8M-402I0.js";import"./mail-DB0D0Sj1.js";import"./createLucideIcon-CcfZQpLF.js";import"./smartphone-Ba5ETqIJ.js";import"./ListItemText-CY5tp-cQ.js";import"./FormControlLabel-Dp1z-5Nj.js";import"./SwitchBase-5Owp2XW5.js";import"./Button-DN2uCHAG.js";import"./IconButton-DcP_xRJ9.js";const Ke=({category:n,menus:V,menu:l})=>{const L=f.get(q),d=f.get(z),o=f.get(Y),N=G().props.settings.languages,[s,w]=y.useState(l),[I,A]=y.useState(V),[B,F]=y.useState(l.type),D=Object.values(c).map(e=>({id:e,name:e})),E=Object.keys(C).map(e=>({id:C[e],name:e})),{snackbar:u,setSnackbar:m,handleClose:O}=Z(),[P,g]=K.useState(!1),R=()=>{g(!1)},_=()=>{g(!0)},H=x({isActive:se().default(!0),menuType:x({type:p(),url:p()}).refine(({type:e,url:r})=>e!==c.LIST&&r.length>0||e===c.LIST,{message:"Choose correct type!",path:["url","type"]}),translations:ae(p().length(2),x({name:p().min(3,{message:"Name should be at least 3 characters!"})}))}),U=s.id<0?L.generateDefaultTitles(N):o.getTranslationsDetails(s.translations),a=ee({mode:"onBlur",reValidateMode:"onBlur",resolver:re(H),defaultValues:{parent:s.parentId,isActive:s.isActive,menuType:{url:s.url||"",type:s.type,image:s.image||"phone"},target:s.target==="_blank",translations:U}}),$=(e,r)=>{F(e.target.value)},J=()=>{const e=new FormData,r=a.getValues("target")?"_blank":"_self";e.append("parentId",String(a.getValues("parent"))),e.append("category",n),e.append("name",n+"-menu"),e.append("order","1"),e.append("target",r),e.append("isActive",String(a.getValues("isActive"))),e.append("type",a.getValues("menuType.type")),e.append("translations",JSON.stringify(a.getValues("translations"))),e.append("url",a.getValues("menuType.url")),e.append("image",a.getValues("menuType.image")),o.updateMenu(e,s.id).then(h=>{w(h.data),A(i=>i.map(j=>j.id===s.id?h.data:j)),m(i=>({...i,open:!0,message:"Link has been updated",severity:"success"}))}).catch(h=>{m(i=>({...i,open:!0,message:"Error Happened while updating link",severity:"error"}))})},W=()=>{g(!1),o.deleteMenu(l.id).then(e=>{m(r=>({...r,open:!0,message:"Link has been deleted!",severity:"success"})),X.get("/admin/get-menu/"+l.category)}).catch(e=>{m(r=>({...r,open:!0,message:"Error Happened while deleting Link!",severity:"error"}))})};return t.jsxs(T,{children:[t.jsxs(S,{direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2,className:"m-[8px]",children:[t.jsx(M,{variant:"h5",children:"Update "+o.getMenuName(s)}),t.jsx(Q,{href:`/admin/get-menu/${n}`,children:t.jsx(M,{variant:"h5",children:"Back"})})]}),t.jsx(te,{...a,children:t.jsxs(T,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"100%"}},noValidate:!0,autoComplete:"off",onSubmit:a.handleSubmit(J),children:[t.jsx(b,{control:a.control,controlName:"parent",id:"parent",label:"Parent Link",placeholder:"Parent Link",items:o.getAllTranslations(I)}),t.jsx(b,{control:a.control,controlName:"menuType.type",id:"type",label:"Link Type",placeholder:"Link Type",items:D,withNone:!1,selectChanged:$}),B!==c.LIST&&t.jsxs(T,{children:[t.jsx(ne,{name:"url",id:"url",controlName:"menuType.url",methods:a,label:"URL",placeholder:"email@example.com"}),t.jsx(oe,{control:a.control,controlName:"menuType.image",id:"image",label:"Icon",placeholder:"Facebook",items:E,withNone:!1})]}),t.jsx(ie,{methods:a,category:d.toTitleCase(n)}),t.jsxs(S,{direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2,className:"m-[8px]",children:[t.jsx(k,{controlName:"isActive",name:"isActive",id:"isActive",color:"secondary",methods:a,label:"Is Active?"}),t.jsx(k,{controlName:"target",name:"target",id:"target",color:"secondary",methods:a,label:"Open in a new tab?"})]}),t.jsxs(S,{direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2,className:"m-[8px]",children:[t.jsx(v,{task:"update",text:d.toTitleCase(n)}),t.jsx(v,{type:"button",task:"delete",text:d.toTitleCase(n),onClick:_})]})]})}),t.jsx(le,{open:u.open,message:u.message,onClose:O,severity:u.severity}),t.jsx(me,{open:P,onClose:R,message:`Are you sure that you want to delete ${o.getMenuName(s)}`,confirmDelete:W})]})};export{Ke as default};
