import{j as e,R as h,L,C as j,a as S,H as O}from"./app-C3wK80uY.js";import{C}from"./CustomButton-C3dP_EVb.js";import{A as _}from"./AdminLayout-Bn0_Hkt7.js";import{M as A}from"./MenuService-CSj7q5EB.js";import{B as G}from"./Brightness1-DzlZaXtj.js";import{I as $}from"./IconButton-DcP_xRJ9.js";import{B as w,T as D}from"./Box-DXkLJjvK.js";import{M as z}from"./Modal-BOfQSbY0.js";import{S as E}from"./Send-MfSLearV.js";import{G as q,C as J,a as K,P as Q,T as U,E as V,b as W,S as X,c as Y,d as Z,F as ee,R as te}from"./grid.component-C-UJl6Wi.js";import{I as oe}from"./toolbar-DUNkpNtP.js";import{C as re}from"./CustomSnackbar-G8VUdTuF.js";import{u as se}from"./SnackbarHook-vWpH4Y2e.js";import"./Paper-BEwslr8d.js";import"./useSlot-D00As9hZ.js";import"./Button-DN2uCHAG.js";import"./styles.module-DNUDPVkR.js";import"./BlockCategories-gKFyJIeZ.js";import"./Icon-8M-402I0.js";import"./mail-DB0D0Sj1.js";import"./createLucideIcon-CcfZQpLF.js";import"./smartphone-Ba5ETqIJ.js";import"./isHostComponent-CYuES88E.js";import"./MenuItem-CqmEd7jq.js";import"./listItemTextClasses-BIi4qrrm.js";import"./listItemButtonClasses-HyWYRFaA.js";import"./ListItemIcon-DD3KcyQi.js";import"./ListItemText-CY5tp-cQ.js";import"./hook-BoUlgXeS.js";import"./Avatar-CTIonlLm.js";import"./Menu-Bg2AoiNO.js";import"./ThemeProvider-DYsQb5zk.js";const ne={menus:[],limit:"0",offset:0,search:"",count:0,next:()=>{},loading:!1,changeLimit:t=>{},onSearch:t=>{},activate:(t,r)=>{},deleteFn:t=>{},reorder:([])=>{}},T=h.createContext(ne),ie=({value:t,children:r})=>e.jsx(T.Provider,{value:t,children:r}),y=()=>{const t=h.useContext(T);if(t===void 0)throw new Error("The context should be inside the provider!");return t},ae=t=>{const{activate:r,loading:s}=y(),n=()=>{r&&r(t.id,!t.isActive)};return e.jsx($,{onClick:n,disabled:s,children:e.jsx(G,{color:t.isActive?"activate":"deactivate"})})},le=t=>e.jsx(L,{href:`/admin/menu/details/${t.id}`,children:e.jsx(C,{task:"display",text:""})}),ce="_modalStyle_1bxe6_1",de={modalStyle:ce},me=t=>{const[r,s]=h.useState(!1),{deleteFn:n}=y(),m=()=>{s(!1)},x=()=>{s(!0)},f=()=>{n(t.id),s(!1)};return e.jsxs(w,{children:[e.jsx(C,{task:"delete",text:"",onClick:x}),e.jsx(z,{open:r,onClose:m,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsxs(w,{className:de.modalStyle,sx:{bgcolor:"background.paper",color:"text.primary",border:"2px solid"},children:[e.jsx(D,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Confirm Deletion Message"}),e.jsxs(D,{id:"modal-modal-description",sx:{mt:2},children:["Are you sure that you want to delete ",t.name]}),e.jsx(E,{direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2,className:"m-[8px]",children:e.jsx(C,{task:"delete",text:"",onClick:f})})]})})]})},pe=[{type:"checkbox",width:"50"},{field:"name",headerText:"Name",width:"250",allowFiltering:!0,textAlign:"Center"},{field:"parent",headerText:"Parent",width:"150",textAlign:"Center"},{field:"isActive",headerText:"Status",width:"130",textAlign:"Center",template:ae},{headerText:"Edit",width:"130",textAlign:"Center",template:le},{headerText:"Delete",width:"130",textAlign:"Center",template:me}],ue=()=>{const t=j.get(A),{menus:r,onSearch:s,reorder:n}=y();let m;const x={type:"Multiple"},f={type:"Excel"},k={pageSizes:S.PageSizes,pageSize:S.ListLimit,totalRecordsCount:3,pageCount:25},b=o=>{switch(o.requestType){case"paging":break;case"searching":o.searchString;break;case"rowdraganddrop":let a=[];o.rows?.map((v,p)=>{a=[...a,{id:v.data.id,order:p}]}),n(a);break}},M=o=>{if(o.rows!==void 0&&o.fromIndex!==void 0&&o.dropIndex!==void 0){o.cancel=!0;let a=[];for(let g=0;g<o?.rows?.length;g++)a.push(o?.fromIndex+g);m&&m.reorderRows(a,o.dropIndex)}};return e.jsx(w,{children:e.jsxs(q,{ref:o=>m=o,id:"blockComp",dataSource:t.mapMenuGrid(r),allowPaging:!0,allowSorting:!0,allowFiltering:!0,allowExcelExport:!0,allowPdfExport:!0,toolbar:["Delete","Search"],editSettings:{allowDeleting:!0,showDeleteConfirmDialog:!0},filterSettings:f,pageSettings:k,actionComplete:b,allowRowDragAndDrop:!0,selectionSettings:x,rowDrop:M,children:[e.jsx(J,{children:pe.map((o,a)=>e.jsx(K,{...o},a))}),e.jsx(oe,{services:[Q,U,V,W,X,Y,Z,ee,te]})]})})},he=({menus:t,count:r})=>{const[s,n]=h.useState(t),[m,x]=h.useState(t),[f,k]=h.useState(!1),[b,M]=h.useState(""),o=j.get(A),[a,g]=h.useState(S.FetchList[0]),{snackbar:v,setSnackbar:p,handleClose:F}=se(),I=l=>{g(l)},P=(l,i)=>{const u=new FormData;u.append("isActive",i?"true":"false"),o.menuActivation(u,l).then(c=>{n(s.map(d=>d.id===c.data.id?c.data:d)),x(m.map(d=>d.id===c.data.id?c.data:d)),p(d=>({...d,open:!0,message:`Link set as ${c.data.isActive?"Active":"Inactive"} `,severity:"success"}))}).catch(c=>{p(d=>({...d,open:!0,message:"Error happened while changing link status!",severity:"error"})),console.log(c)})},B=l=>{o.deleteMenu(l).then(()=>{n(s.filter(i=>i.id!==l)),x(m.filter(i=>i.id!==l)),p(i=>({...i,open:!0,message:"Link has been deleted!",severity:"success"}))}).catch(i=>{p(u=>({...u,open:!0,message:"Error Happened while deleting Link!",severity:"error"}))})},R=l=>{const i=new FormData;i.append("list",JSON.stringify(l)),o.reorder(i).then(()=>{p(u=>({...u,open:!0,message:"Links has been ordered!",severity:"success"}))}).catch(u=>{console.log(u),p(c=>({...c,open:!0,message:"Error Happened while reordering links!",severity:"error"}))})},H=l=>{},N=()=>{};return e.jsxs(ie,{value:{menus:s,limit:a,offset:0,search:"",count:r,next:N,loading:f,changeLimit:I,onSearch:H,activate:P,deleteFn:B,reorder:R},children:[e.jsx(ue,{}),e.jsx(re,{open:v.open,message:v.message,onClose:F,severity:v.severity})]})},Qe=({category:t,menus:r})=>{const s=j.get(S),n=()=>s.toTitleCase(t);return e.jsxs(_,{children:[e.jsx(O,{title:n()}),e.jsx(w,{className:"py-[16px]",children:e.jsx(E,{direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2,children:e.jsx(L,{href:`/admin/menu/create/${t}`,children:e.jsx(C,{task:"add",text:n()})})})}),e.jsx(he,{menus:r,count:r.length})]})};export{Qe as default};
