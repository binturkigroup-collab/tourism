import{j as o,R as p,bs as u,a7 as h,a6 as d,C as g}from"./app-DiW-XT2R.js";import{Card as f,CardHeader as v,CardTitle as y,CardContent as b}from"./card-C8NVqiK_.js";import{Button as m}from"./button-CkCT4k52.js";import{B as x}from"./BlockService-B1hVAasl.js";import{Dialog as C,DialogTrigger as R,DialogContent as $}from"./dialog-B9DiPa-h.js";import D from"./LeadSection-DSURfcRd.js";import{c as N}from"./createLucideIcon-CzejhRRW.js";import{Y as _}from"./HeaderLayout-F5IGAGcu.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=N("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),U={leadType:{type:"project",id:0,propertyName:""},resources:{brochure:new u({}),title:"",youtubeUrl:"",qrFile:new u({})}},j=p.createContext(U),B=({value:e,children:r})=>o.jsx(j.Provider,{value:e,children:r}),w=()=>{const e=p.useContext(j);if(!e)throw new Error("A context should be used inside the provider!");return e};var S=Object.getOwnPropertyDescriptor,k=(e,r,t,n)=>{for(var s=n>1?void 0:n?S(r,t):r,c=e.length-1,a;c>=0;c--)(a=e[c])&&(s=a(s)||s);return s};let i=class extends x{getBrochureUrl(e,r){return`${window.location.origin}/file/${r}/brochure/${e}`}getResourceUrl(e,r){return`${window.location.origin}/file/${r}/brochure/${e}`}};i=k([h()],i);var P=Object.getOwnPropertyDescriptor,O=(e,r,t,n)=>{for(var s=n>1?void 0:n?P(r,t):r,c=e.length-1,a;c>=0;c--)(a=e[c])&&(s=a(s)||s);return s};let l=class extends x{constructor(){super(...arguments),this.getImageUrl=e=>`${window.location.origin}/file/projects/${e}`,this.uploadImage=(e,r)=>d.post("/admin/block/upload/file/"+r+"?_method=PATCH",e,{headers:{"Content-Type":"multipart/form-data"}}),this.getFile=e=>d.get(this.getImageUrl(e),{responseType:"arraybuffer"})}getBrochureUrl(e,r){return`${window.location.origin}/file/${r}/brochure/${e}`}getResourceUrl(e,r){return`${window.location.origin}/file/${r}/brochure/${e}`}};l=O([h()],l);const F=()=>{const e=g.get(l),{resources:r,leadType:t}=w(),n=t.type==="project"?"projects":"properties",s=()=>{window.gtag?.("event","brochure_download",{project_name:t.propertyName}),window.location.href=e.getBrochureUrl(r.brochure.url,n)};return o.jsx("div",{children:o.jsxs(C,{children:[o.jsx(R,{asChild:!0,children:o.jsxs(m,{variant:"outline",size:"lg",children:[o.jsx(T,{className:"w-4 h-4"}),"Download Brochure"]})}),o.jsx($,{className:"bg-white",children:o.jsx(D,{leadType:{...t,isBrochureDownloaded:!0},callback:s})})]})})},q=()=>{const e=g.get(i),{leadType:r,resources:t}=w(),n=r.type==="project"?"projects":"properties";return o.jsxs(f,{children:[o.jsx(v,{children:o.jsx(y,{className:"text-foreground",children:"Resources"})}),o.jsxs(b,{className:"flex flex-wrap gap-4",children:[o.jsx(F,{}),o.jsx(m,{variant:"outline",className:"gap-2",asChild:!0,children:o.jsxs("a",{href:t.youtubeUrl,target:"_blank",rel:"noopener noreferrer",className:"cursor-pointer",children:[o.jsx(_,{className:"w-4 h-4"}),"Watch Video"]})}),t.qrFile&&o.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 border border-border rounded-md",children:[o.jsx("img",{src:e.getResourceUrl(t.qrFile.url,n),alt:"QR Code",className:"w-16 h-16"}),o.jsx("span",{className:"text-sm text-muted-foreground",children:"Scan for details"})]})]})]})},Q=({resources:e,leadType:r})=>o.jsx(B,{value:{leadType:r,resources:e},children:o.jsx(q,{})});export{Q as R};
