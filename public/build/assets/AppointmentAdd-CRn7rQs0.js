import{C as s,a as b,F as j,R as d,j as t,H as A,L as C}from"./app-C3wK80uY.js";import{B as T}from"./BlockService-BwsXifcj.js";import{A as B}from"./AppointmentService-CNbiKTJr.js";import{B as D}from"./BlockCategories-gKFyJIeZ.js";import{u as V,F as y}from"./index.esm-CmhnqTjL.js";import{o as w,d as I,s as N,t as F}from"./zod-B5AMIXlb.js";import{u as P}from"./SnackbarHook-vWpH4Y2e.js";import{V as H}from"./ValidatedSelect-lEDzcdS4.js";import{V as R}from"./ValidatedDatePicker-CcQv23_j.js";import{V as E}from"./ValidatedCheckbox-U0fQ8zdE.js";import{C as L}from"./CustomButton-C3dP_EVb.js";import{C as M}from"./CustomSnackbar-G8VUdTuF.js";import{A as _}from"./AdminLayout-Bn0_Hkt7.js";import{B as a,T as u}from"./Box-DXkLJjvK.js";import{B as q}from"./Breadcrumbs-qP-bux-K.js";import{S as z}from"./Send-MfSLearV.js";import"./InputAdornment-WpRiTsae.js";import"./useSlot-D00As9hZ.js";import"./Select-50sKScyd.js";import"./Menu-Bg2AoiNO.js";import"./isHostComponent-CYuES88E.js";import"./Paper-BEwslr8d.js";import"./Modal-BOfQSbY0.js";import"./useControlled-BhUtEkbl.js";import"./formControlState-Dq1zat_P.js";import"./useFormControl-Cr1AHk0s.js";import"./FormHelperText-QuUs-8Rq.js";import"./isMuiElement-CBKBaUeV.js";import"./MenuItem-CqmEd7jq.js";import"./listItemTextClasses-BIi4qrrm.js";import"./index-Br-YPJKH.js";import"./IconButton-DcP_xRJ9.js";import"./Popper-CeL32HvH.js";import"./Button-DN2uCHAG.js";import"./ListItem-BXiNssqK.js";import"./listItemButtonClasses-HyWYRFaA.js";import"./Chip-cLQvExS1.js";import"./FormControlLabel-Dp1z-5Nj.js";import"./Checkbox-DozM_A5U.js";import"./SwitchBase-5Owp2XW5.js";import"./styles.module-DNUDPVkR.js";import"./Icon-8M-402I0.js";import"./mail-DB0D0Sj1.js";import"./createLucideIcon-CcfZQpLF.js";import"./smartphone-Ba5ETqIJ.js";import"./ListItemIcon-DD3KcyQi.js";import"./ListItemText-CY5tp-cQ.js";import"./hook-BoUlgXeS.js";import"./Avatar-CTIonlLm.js";import"./ThemeProvider-DYsQb5zk.js";const Mt=({category:r})=>{const p=s.get(T),i=s.get(b),f=s.get(B),h=s.get(j),[l,x]=d.useState([]),g=w({blockId:N({message:"Please determine the trip"}).refine(e=>h.isPositive(e)),startDate:I({message:"Date is required!"})}),o=V({mode:"onBlur",reValidateMode:"onBlur",resolver:F(g),defaultValues:{blockId:" -1",startDate:new Date,isActive:!0}}),{snackbar:m,setSnackbar:c,handleClose:S}=P();d.useEffect(()=>{p.getActiveBlocks(D.TRIP).then(e=>{x(e.data),console.log(e.data),o.setValue("blockId",e.data[0].id.toString(),{shouldValidate:!1,shouldDirty:!1})})},[]);const k=()=>{const e=new FormData;e.append("category",r),e.append("blockId",String(o.getValues("blockId"))),e.append("startDate",new Date(o.getValues("startDate")).toDateString()),e.append("isActive",String(o.getValues("isActive"))),f.store(e).then(v=>{o.reset(),c(n=>({...n,open:!0,message:"A new appointment has been added",severity:"success"}))}).catch(v=>{c(n=>({...n,open:!0,message:"Error Happened while storing appointment",severity:"error"}))})};return t.jsxs(_,{children:[t.jsx(A,{title:"Appointments"}),t.jsx(a,{className:"py-[16px]",children:t.jsxs(a,{children:[t.jsxs(q,{children:[t.jsxs(C,{href:"/admin/appointments",children:["Back to ",i.toTitleCase(r)]}),t.jsxs(u,{children:["Add New ",i.toTitleCase(r)]})]}),t.jsx(a,{className:"p-[16px]",children:t.jsxs(u,{variant:"h5",children:["Add New ",i.toTitleCase(r)]})}),t.jsx(y,{...o,children:t.jsxs(a,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"100%"}},noValidate:!0,autoComplete:"off",onSubmit:o.handleSubmit(k),children:[t.jsx(E,{name:"isActive",id:"isActive",color:"secondary",control:o.control,label:"Is Active"}),l.length>0&&t.jsx(H,{control:o.control,controlName:"blockId",id:"blockId",label:"Trip",placeholder:"Trip",withNone:!1,items:l.map(e=>({id:e.id.toString(),name:p.getBlockName(e)}))}),t.jsx(R,{controlName:"startDate",methods:o,label:"Trip Date"}),t.jsx(z,{direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2,className:"mx-[8px] my-[24px]",children:t.jsx(L,{task:"add",text:i.toTitleCase(r)})})]})}),t.jsx(M,{open:m.open,message:m.message,onClose:S,severity:m.severity})]})})]})};export{Mt as default};
