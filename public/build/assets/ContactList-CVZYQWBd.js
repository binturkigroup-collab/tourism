import{j as e,R as s,L as R,C as j,a as u,H as I}from"./app-DiW-XT2R.js";import{A as B}from"./AdminLayout-BncvC458.js";import{C as v}from"./ContactService-CpHwabnS.js";import{u as N}from"./SnackbarHook-CcEHZ6yi.js";import{C as _}from"./CustomSnackbar-Dw7l-5cQ.js";import{C}from"./CustomButton-nEbszSQU.js";import{B as f,T as w}from"./Box-BIlEOssd.js";import{M as H}from"./Modal-C_Vi7S8X.js";import{S as O}from"./Send-DwzwYWJL.js";import{C as z}from"./CustomerType-CT2hPlaq.js";import{G,C as $,a as q,P as J,T as K,E as Q,b as U,S as V,c as W,d as X,F as Y,R as Z}from"./grid.component-DLjYW315.js";import{I as ee}from"./toolbar-Bf2-SnO7.js";import"./styles.module-DNUDPVkR.js";import"./BlockCategories-gKFyJIeZ.js";import"./Icon-Cyiifixs.js";import"./Paper-BW67c0Rd.js";import"./useSlot-D1jzCan3.js";import"./mail-CSA8imBK.js";import"./createLucideIcon-CzejhRRW.js";import"./smartphone-D7WOu-Aq.js";import"./isHostComponent-B2iQ8i1a.js";import"./MenuItem-GJkZjFZB.js";import"./listItemTextClasses-BxSQuiyo.js";import"./listItemButtonClasses-BKDzk8Yp.js";import"./ListItemIcon-lfoxkzoc.js";import"./ListItemText-6SnngRZD.js";import"./hook-ChxrQmvj.js";import"./Avatar-BaiBLuYk.js";import"./IconButton-Cu0Qh6L-.js";import"./Menu-bPvhPpmt.js";import"./ThemeProvider-tTCgpLcA.js";import"./Button-3jDmhGPp.js";const te={contacts:[],limit:"0",offset:0,search:"",count:0,next:()=>{},loading:!1,changeLimit:t=>{},onSearch:t=>{},deleteFn:t=>{}},b=s.createContext(te),oe=({value:t,children:a})=>e.jsx(b.Provider,{value:t,children:a}),k=()=>{const t=s.useContext(b);if(t===void 0)throw new Error("The context should be inside the provider!");return t},re=t=>e.jsx(R,{href:`/admin/contact/${t.id}`,className:"py-[8px]",children:e.jsx(C,{task:"display",text:""})}),ae="_modalStyle_1bxe6_1",se={modalStyle:ae},ne=t=>{const[a,r]=s.useState(!1),{deleteFn:l}=k(),c=()=>{r(!1)},d=()=>{r(!0)},m=()=>{l(t.id),r(!1)};return e.jsxs(f,{className:"py-[8px]",children:[e.jsx(C,{task:"delete",text:"",onClick:d}),e.jsx(H,{open:a,onClose:c,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsxs(f,{className:se.modalStyle,sx:{bgcolor:"background.paper",color:"text.primary",border:"2px solid"},children:[e.jsx(w,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Confirm Deletion Message"}),e.jsxs(w,{id:"modal-modal-description",sx:{mt:2},children:["Are you sure that you want to delete ",t.name]}),e.jsx(O,{direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2,className:"m-[8px]",children:e.jsx(C,{task:"delete",text:"",onClick:m})})]})})]})},ie=t=>e.jsx("div",{children:z[t.type]}),le=[{type:"checkbox",width:"50"},{field:"agentName",headerText:"Agent",width:"200",textAlign:"Center"},{field:"name",headerText:"Name",width:"150",allowFiltering:!0,textAlign:"Center"},{field:"phone",headerText:"Phone",width:"150",textAlign:"Center"},{field:"email",headerText:"Email",width:"200",textAlign:"Center"},{field:"type",headerText:"Customer Type",width:"200",textAlign:"Center",template:ie},{field:"createdAt",headerText:"Date of lead",width:"150",textAlign:"Center"},{headerText:"Edit",width:"130",textAlign:"Center",template:re},{headerText:"Delete",width:"130",textAlign:"Center",template:ne}],ce=()=>{j.get(v);const{contacts:t,onSearch:a}=k();let r;const l={type:"Multiple"},c={type:"Excel"},d={pageSizes:u.PageSizes,pageSize:u.ListLimit,totalRecordsCount:3,pageCount:25},m=o=>{switch(o.requestType){case"paging":break;case"searching":o.searchString;break}},g=o=>{if(o.rows!==void 0&&o.fromIndex!==void 0&&o.dropIndex!==void 0){o.cancel=!0;let p=[];for(let x=0;x<o?.rows?.length;x++)p.push(o?.fromIndex+x);r&&r.reorderRows(p,o.dropIndex)}};return e.jsx(f,{children:e.jsxs(G,{ref:o=>r=o,id:"blockComp",dataSource:t,allowPaging:!0,allowSorting:!0,allowFiltering:!0,allowExcelExport:!0,allowPdfExport:!0,toolbar:["Delete","Search"],editSettings:{allowDeleting:!0,showDeleteConfirmDialog:!0},filterSettings:c,pageSettings:d,actionComplete:m,allowRowDragAndDrop:!0,selectionSettings:l,rowDrop:g,children:[e.jsx($,{children:le.map((o,p)=>e.jsx(q,{...o},p))}),e.jsx(ee,{services:[J,K,Q,U,V,W,X,Y,Z]})]})})},de=({contacts:t,count:a})=>{const[r,l]=s.useState(t),[c,d]=s.useState(t),[m,g]=s.useState(!1),[o,p]=s.useState(""),x=j.get(v),[D,T]=s.useState(u.FetchList[0]),{snackbar:h,setSnackbar:S,handleClose:E}=N(),A=n=>{T(n)},L=(n,me)=>{const y=new FormData;y.append("id",n.toString()),x.destroy(n,y).then(()=>{l(r.filter(i=>i.id!==n)),d(c.filter(i=>i.id!==n)),S(i=>({...i,open:!0,message:"Block has been deleted!",severity:"success"}))}).catch(i=>{S(M=>({...M,open:!0,message:"Error Happened while deleting block!",severity:"error"}))})},F=n=>{},P=()=>{};return e.jsxs(oe,{value:{contacts:r,limit:D,offset:0,search:"",count:a,next:P,loading:m,changeLimit:A,onSearch:F,deleteFn:L},children:[e.jsx(ce,{}),e.jsx(_,{open:h.open,message:h.message,onClose:E,severity:h.severity})]})},qe=({contacts:t,count:a})=>e.jsxs(B,{children:[e.jsx(I,{title:"Contacts"}),e.jsx(de,{contacts:t,count:a})]});export{qe as default};
