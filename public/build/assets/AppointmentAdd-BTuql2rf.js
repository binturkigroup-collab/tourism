import{C as s,a as b,F as j,R as d,j as t,H as A,L as C}from"./app-B05HYnb3.js";import{B as T}from"./BlockService-Dra7VTvY.js";import{A as B}from"./AppointmentService-CJNyB9Gg.js";import{B as D}from"./BlockCategories-gKFyJIeZ.js";import{u as V,F as y}from"./index.esm-DVlBRIqM.js";import{o as w,d as I,s as N,t as F}from"./zod-lJ296xRb.js";import{u as P}from"./SnackbarHook-CiBrGsL4.js";import{V as H}from"./ValidatedSelect-CZhj5vm9.js";import{V as R}from"./ValidatedDatePicker-SsE8PVUt.js";import{V as E}from"./ValidatedCheckbox-BqBvhm5a.js";import{C as L}from"./CustomButton-CJVVLJmt.js";import{C as M}from"./CustomSnackbar-Bez-GNp6.js";import{A as _}from"./AdminLayout-BqgSxwa6.js";import{B as a,T as u}from"./Box-RV04XL3h.js";import{B as q}from"./Breadcrumbs-LN1Gmsm_.js";import{S as z}from"./Send-ZAnJecau.js";import"./InputAdornment-gOE6kajG.js";import"./useSlot-xgwQKnQ5.js";import"./Select-B30xSI0u.js";import"./Menu-BVfd7xCs.js";import"./isHostComponent-C3L2UNi8.js";import"./Paper-Bv3sIEco.js";import"./Modal-Cn09HyHg.js";import"./useControlled-DUTa1Exj.js";import"./formControlState-Dq1zat_P.js";import"./useFormControl-BofjglMm.js";import"./FormHelperText-Qr84Mdnz.js";import"./isMuiElement-CWm6COmJ.js";import"./MenuItem-B8b56AnY.js";import"./listItemTextClasses-CNzp_QZz.js";import"./index-Dq134tiA.js";import"./IconButton-B3gEuC88.js";import"./Popper-C4veDasF.js";import"./Button-C2eAeK6r.js";import"./ListItem-CIUyGoMR.js";import"./listItemButtonClasses-DLtIpq-e.js";import"./Chip-CzPK2ZLG.js";import"./FormControlLabel-BQtj8q_0.js";import"./Checkbox-DHu3bCxU.js";import"./SwitchBase-D_Sq7LWZ.js";import"./styles.module-DNUDPVkR.js";import"./Icon-Dao_BtV8.js";import"./mail-wIstfkvy.js";import"./createLucideIcon-CqSzLRzo.js";import"./smartphone-Bx5cTzbE.js";import"./ListItemIcon-C6KgXvLR.js";import"./ListItemText-Ir23mb16.js";import"./hook-C_C30jOJ.js";import"./Avatar-CW627ElJ.js";import"./ThemeProvider-Bv7TvrOm.js";const Mt=({category:r})=>{const p=s.get(T),i=s.get(b),f=s.get(B),h=s.get(j),[l,x]=d.useState([]),g=w({blockId:N({message:"Please determine the trip"}).refine(e=>h.isPositive(e)),startDate:I({message:"Date is required!"})}),o=V({mode:"onBlur",reValidateMode:"onBlur",resolver:F(g),defaultValues:{blockId:" -1",startDate:new Date,isActive:!0}}),{snackbar:m,setSnackbar:c,handleClose:S}=P();d.useEffect(()=>{p.getActiveBlocks(D.TRIP).then(e=>{x(e.data),console.log(e.data),o.setValue("blockId",e.data[0].id.toString(),{shouldValidate:!1,shouldDirty:!1})})},[]);const k=()=>{const e=new FormData;e.append("category",r),e.append("blockId",String(o.getValues("blockId"))),e.append("startDate",new Date(o.getValues("startDate")).toDateString()),e.append("isActive",String(o.getValues("isActive"))),f.store(e).then(v=>{o.reset(),c(n=>({...n,open:!0,message:"A new appointment has been added",severity:"success"}))}).catch(v=>{c(n=>({...n,open:!0,message:"Error Happened while storing appointment",severity:"error"}))})};return t.jsxs(_,{children:[t.jsx(A,{title:"Appointments"}),t.jsx(a,{className:"py-[16px]",children:t.jsxs(a,{children:[t.jsxs(q,{children:[t.jsxs(C,{href:"/admin/appointments",children:["Back to ",i.toTitleCase(r)]}),t.jsxs(u,{children:["Add New ",i.toTitleCase(r)]})]}),t.jsx(a,{className:"p-[16px]",children:t.jsxs(u,{variant:"h5",children:["Add New ",i.toTitleCase(r)]})}),t.jsx(y,{...o,children:t.jsxs(a,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"100%"}},noValidate:!0,autoComplete:"off",onSubmit:o.handleSubmit(k),children:[t.jsx(E,{name:"isActive",id:"isActive",color:"secondary",control:o.control,label:"Is Active"}),l.length>0&&t.jsx(H,{control:o.control,controlName:"blockId",id:"blockId",label:"Trip",placeholder:"Trip",withNone:!1,items:l.map(e=>({id:e.id.toString(),name:p.getBlockName(e)}))}),t.jsx(R,{controlName:"startDate",methods:o,label:"Trip Date"}),t.jsx(z,{direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2,className:"mx-[8px] my-[24px]",children:t.jsx(L,{task:"add",text:i.toTitleCase(r)})})]})}),t.jsx(M,{open:m.open,message:m.message,onClose:S,severity:m.severity})]})})]})};export{Mt as default};
